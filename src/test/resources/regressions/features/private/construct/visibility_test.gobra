// Any copyright is dedicated to the Public Domain.
// http://creativecommons.org/publicdomain/zero/1.0/

package client

// ##(-I ./)
import v "visibility"

func client() {
  a := &v.Visibility{}
  assert(acc(a) && a.PvtMem() && a.PubInt == 0 && a.GetPvtInt() == 0)

  v.Start(a)
  assert(acc(a) && a.PvtMem() && a.PubInt == 1 && a.GetPvtInt() == 0)

  v.Next(a)
  assert(acc(a) && a.PvtMem() && a.PubInt == 2 && a.GetPvtInt() == 1)

  v.Next(a)
  assert(acc(a) && a.PvtMem() && a.PubInt == 3 && a.GetPvtInt() == 2)

  v.Reload(a)
  assert(acc(a) && a.PvtMem() && a.PubInt == 2 && a.GetPvtInt() == 1)

  v.Reload(a)
  assert(acc(a) && a.PvtMem() && a.PubInt == 1 && a.GetPvtInt() == 0)

  v.Reload(a)
  assert(acc(a) && a.PvtMem() && a.PubInt == 0 && a.GetPvtInt() == 0)

  v.Reload(a)
  assert(acc(a) && a.PvtMem() && a.PubInt == 0 && a.GetPvtInt() == 0)
  
  assert a.IsPvtEmpty()
  
  v.Next(a)
  assert(acc(a) && a.PvtMem() && a.PubInt == 1 && a.GetPvtInt() == 0)
  
  assert !a.IsPvtEmpty() && v.PubInt == 1
}




